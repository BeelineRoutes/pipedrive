/** ****************************************************************************************************************** **
	Calls related to orgs

    
** ****************************************************************************************************************** **/

package pipedrive 

import (
    "github.com/pkg/errors"
    
    "fmt"
    "net/http"
    "context"
)

  //-----------------------------------------------------------------------------------------------------------------------//
 //----- CONSTS ----------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------//

  //-----------------------------------------------------------------------------------------------------------------------//
 //----- STRUCTS ---------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------//

type Org struct {
    Id, Company_id int
    Name, Address, Address_formatted_address string     
}


  //-----------------------------------------------------------------------------------------------------------------------//
 //----- PRIVATE FUNCTIONS -----------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------//

  //-----------------------------------------------------------------------------------------------------------------------//
 //----- FUNCTIONS -------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------//

// returns all jobs that match our conditions
func (this *Pipedrive) GetOrg (ctx context.Context, bearer, domain string, orgId int) (*Org, error) {
    var resp struct {
        Success bool 
        Data *Org
    }

    header := make(map[string]string)
    header["Authorization"] = "Bearer " + bearer 
    
    err := this.send (ctx, http.MethodGet, fmt.Sprintf("%s/v1/organizations/%d", domain, orgId), header, nil, &resp)
    if err != nil { return nil, err } // bail

    if resp.Success == false {
        return nil, errors.Errorf("Success was false : %s : %d", domain, orgId)
    }
    
    return resp.Data, nil // we're good
}
